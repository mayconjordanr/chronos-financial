# CHRONOS Financial - Staging Environment Variables Template
# Copy this file to .env.staging and fill in the values

# ===============================================
# DATABASE CONFIGURATION
# ===============================================
POSTGRES_DB=chronos_staging
POSTGRES_USER=chronos_staging
POSTGRES_PASSWORD=<STAGING_DATABASE_PASSWORD>
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}

# Database connection pool settings
DB_POOL_MIN=1
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=30000
DB_QUERY_TIMEOUT=60000

# ===============================================
# REDIS CONFIGURATION
# ===============================================
REDIS_PASSWORD=<STAGING_REDIS_PASSWORD>
REDIS_URL=redis://redis:6379
REDIS_DB=1
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000
REDIS_MAX_RETRIES_PER_REQUEST=3

# ===============================================
# AUTHENTICATION & SECURITY
# ===============================================
JWT_SECRET=<STAGING_JWT_SECRET>
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d
BCRYPT_ROUNDS=10

# Session configuration
SESSION_SECRET=<STAGING_SESSION_SECRET>
SESSION_MAX_AGE=86400000
SESSION_SECURE=true
SESSION_SAME_SITE=strict

# CORS configuration
CORS_ORIGIN=https://staging.your-domain.com
CORS_CREDENTIALS=true

# Rate limiting (more permissive for testing)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=200
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# ===============================================
# APPLICATION CONFIGURATION
# ===============================================
NODE_ENV=staging
LOG_LEVEL=debug
PORT=3001

# Application metadata
APP_NAME=CHRONOS Financial (Staging)
APP_VERSION=1.0.0-staging
APP_DESCRIPTION=Multi-tenant Financial Management Platform - Staging

# ===============================================
# FRONTEND CONFIGURATION
# ===============================================
NEXT_PUBLIC_API_URL=https://staging-api.your-domain.com
NEXT_PUBLIC_WS_URL=wss://staging-api.your-domain.com
NEXT_PUBLIC_APP_NAME=CHRONOS (Staging)
NEXT_PUBLIC_APP_VERSION=1.0.0-staging
NEXT_TELEMETRY_DISABLED=1

# ===============================================
# SSL/TLS CONFIGURATION
# ===============================================
SSL_CERT_PATH=/etc/nginx/ssl/staging-cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/staging-private.key
SSL_CHAIN_PATH=/etc/nginx/ssl/staging-chain.pem
SSL_DHPARAM_PATH=/etc/nginx/ssl/dhparam.pem

# Let's Encrypt configuration
LETSENCRYPT_EMAIL=admin@your-domain.com
LETSENCRYPT_DOMAINS=staging.your-domain.com,staging-api.your-domain.com

# ===============================================
# MONITORING & OBSERVABILITY
# ===============================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=<STAGING_GRAFANA_PASSWORD>

# Prometheus configuration
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_DAYS=7

# Application monitoring
SENTRY_DSN=<STAGING_SENTRY_DSN>
NEW_RELIC_LICENSE_KEY=<STAGING_NEW_RELIC_KEY>

# ===============================================
# EMAIL CONFIGURATION
# ===============================================
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_SECURE=false
SMTP_USER=<MAILTRAP_USER>
SMTP_PASSWORD=<MAILTRAP_PASSWORD>
SMTP_FROM_EMAIL=staging@your-domain.com
SMTP_FROM_NAME=CHRONOS Financial (Staging)

# ===============================================
# THIRD-PARTY INTEGRATIONS
# ===============================================
# Stripe (test keys)
STRIPE_PUBLIC_KEY=pk_test_...
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_test_...

# Supabase (staging project)
SUPABASE_URL=https://staging-project.supabase.co
SUPABASE_ANON_KEY=<STAGING_SUPABASE_ANON_KEY>
SUPABASE_SERVICE_ROLE_KEY=<STAGING_SUPABASE_SERVICE_KEY>

# ===============================================
# BACKUP CONFIGURATION
# ===============================================
BACKUP_SCHEDULE=0 3 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_ENCRYPT=true
BACKUP_ENCRYPTION_KEY=<STAGING_BACKUP_ENCRYPTION_KEY>

# S3 backup configuration
S3_BACKUP_BUCKET=chronos-backups-staging
AWS_ACCESS_KEY_ID=<STAGING_AWS_ACCESS_KEY>
AWS_SECRET_ACCESS_KEY=<STAGING_AWS_SECRET_KEY>
AWS_REGION=us-east-1

# ===============================================
# PERFORMANCE & OPTIMIZATION
# ===============================================
# Node.js optimization
NODE_OPTIONS=--max-old-space-size=512
UV_THREADPOOL_SIZE=4

# Image optimization
NEXT_IMAGES_DOMAIN=staging.your-domain.com
NEXT_IMAGES_LOADER=default

# CDN configuration
CDN_URL=https://staging-cdn.your-domain.com
STATIC_ASSETS_URL=https://staging-static.your-domain.com

# ===============================================
# FEATURE FLAGS
# ===============================================
FEATURE_MULTI_TENANT=true
FEATURE_REAL_TIME_UPDATES=true
FEATURE_ANALYTICS=true
FEATURE_ADVANCED_REPORTING=true
FEATURE_API_VERSIONING=true

# ===============================================
# SECURITY HEADERS
# ===============================================
CSP_SCRIPT_SRC='self' 'unsafe-eval' 'unsafe-inline' staging-cdn.your-domain.com
CSP_STYLE_SRC='self' 'unsafe-inline' fonts.googleapis.com
CSP_FONT_SRC='self' fonts.gstatic.com
CSP_IMG_SRC='self' data: https: staging-cdn.your-domain.com
CSP_CONNECT_SRC='self' staging-api.your-domain.com wss://staging-api.your-domain.com

# ===============================================
# DEPLOYMENT CONFIGURATION
# ===============================================
DEPLOY_ENVIRONMENT=staging
DEPLOY_VERSION=1.0.0-staging
DEPLOY_TIMESTAMP=<DEPLOYMENT_TIMESTAMP>
DEPLOY_COMMIT_SHA=<GIT_COMMIT_SHA>

# Health check configuration
HEALTH_CHECK_TIMEOUT=30000
HEALTH_CHECK_INTERVAL=30000

# ===============================================
# LOGGING CONFIGURATION
# ===============================================
LOG_FORMAT=json
LOG_TIMESTAMP=true
LOG_COLORIZE=true
LOG_FILE_PATH=/app/logs/application.log
LOG_ERROR_FILE_PATH=/app/logs/error.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=3

# ===============================================
# MULTI-TENANCY CONFIGURATION
# ===============================================
DEFAULT_TENANT_LIMITS_USERS=50
DEFAULT_TENANT_LIMITS_TRANSACTIONS=5000
DEFAULT_TENANT_LIMITS_ACCOUNTS=25
DEFAULT_TENANT_LIMITS_STORAGE_MB=512

# Tenant isolation
TENANT_ISOLATION_STRICT=true
TENANT_DATA_ENCRYPTION=true

# ===============================================
# MAINTENANCE MODE
# ===============================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=Staging system is under maintenance. Please try again later.
MAINTENANCE_ALLOWED_IPS=127.0.0.1,::1

# ===============================================
# TIMEZONE & LOCALIZATION
# ===============================================
TZ=UTC
DEFAULT_LOCALE=en-US
SUPPORTED_LOCALES=en-US,es-ES,fr-FR

# ===============================================
# WEBHOOKS & EXTERNAL APIS
# ===============================================
WEBHOOK_SECRET=<STAGING_WEBHOOK_SECRET>
WEBHOOK_TIMEOUT=30000
WEBHOOK_MAX_RETRIES=3

# External API rate limits
EXTERNAL_API_RATE_LIMIT=500
EXTERNAL_API_BURST_LIMIT=50

# ===============================================
# DEVELOPMENT/DEBUG (can be true in staging)
# ===============================================
DEBUG=true
VERBOSE_LOGGING=true
ENABLE_CORS_DEBUG=false
ENABLE_SQL_LOGGING=false